'''
Программа-калькулятор с базовыми математическими операциями
Поддерживает: сложение, вычитание, умножение, деление, возведение в степень, извлечение корня
'''

import math  # Импортируем модуль math для математических операций

def show_menu():
    '''
    Функция для отображения меню доступных операций
    '''
    print("\n" + "="*50)
    print("           КАЛЬКУЛЯТОР")
    print("="*50)
    print("1. Сложение (+)")
    print("2. Вычитание (-)")
    print("3. Умножение (*)")
    print("4. Деление (/)")
    print("5. Возведение в степень (^)")
    print("6. Квадратный корень (√)")
    print("7. Выход")
    print("="*50)

def get_number(prompt):
    '''
    Функция для безопасного ввода числа с обработкой ошибок
    
    Args:
        prompt (str): Подсказка для пользователя
    
    Returns:
        float: Введенное пользователем число
    '''
    while True:
        try:
            # Пытаемся преобразовать ввод пользователя в число с плавающей точкой
            number = float(input(prompt))
            return number
        except ValueError:
            # Если введено не число, выводим сообщение об ошибке
            print("Ошибка! Пожалуйста, введите число.")

def addition():
    '''
    Функция для выполнения операции сложения
    '''
    print("\n--- СЛОЖЕНИЕ ---")
    # Получаем два числа от пользователя
    num1 = get_number("Введите первое число: ")
    num2 = get_number("Введите второе число: ")
    
    # Выполняем сложение
    result = num1 + num2
    
    # Выводим результат с форматированием
    print(f"Результат: {num1} + {num2} = {result}")

def subtraction():
    '''
    Функция для выполнения операции вычитания
    '''
    print("\n--- ВЫЧИТАНИЕ ---")
    num1 = get_number("Введите первое число: ")
    num2 = get_number("Введите второе число: ")
    
    result = num1 - num2
    print(f"Результат: {num1} - {num2} = {result}")

def multiplication():
    '''
    Функция для выполнения операции умножения
    '''
    print("\n--- УМНОЖЕНИЕ ---")
    num1 = get_number("Введите первое число: ")
    num2 = get_number("Введите второе число: ")
    
    result = num1 * num2
    print(f"Результат: {num1} × {num2} = {result}")

def division():
    '''
    Функция для выполнения операции деления с проверкой деления на ноль
    '''
    print("\n--- ДЕЛЕНИЕ ---")
    num1 = get_number("Введите делимое: ")
    
    # Особенная проверка для делителя - нельзя делить на ноль
    while True:
        num2 = get_number("Введите делитель: ")
        if num2 == 0:
            print("Ошибка! Деление на ноль невозможно.")
        else:
            break
    
    result = num1 / num2
    print(f"Результат: {num1} ÷ {num2} = {result}")

def exponentiation():
    '''
    Функция для выполнения операции возведения в степень
    '''
    print("\n--- ВОЗВЕДЕНИЕ В СТЕПЕНЬ ---")
    base = get_number("Введите основание: ")
    exponent = get_number("Введите степень: ")
    
    # Используем оператор ** для возведения в степень
    result = base ** exponent
    print(f"Результат: {base} ^ {exponent} = {result}")

def square_root():
    '''
    Функция для извлечения квадратного корня с проверкой отрицательного числа
    '''
    print("\n--- КВАДРАТНЫЙ КОРЕНЬ ---")
    
    # Особенная проверка - корень из отрицательного числа не определен в вещественных числах
    while True:
        number = get_number("Введите число: ")
        if number < 0:
            print("Ошибка! Квадратный корень из отрицательного числа не определен.")
            print("Пожалуйста, введите неотрицательное число.")
        else:
            break
    
    # Используем функцию sqrt из модуля math
    result = math.sqrt(number)
    print(f"Результат: √{number} = {result}")

def main():
    '''
    Основная функция программы, содержащая главный цикл калькулятора
    '''
    print("Добро пожаловать в калькулятор!")
    
    # Главный цикл программы
    while True:
        # Показываем меню пользователю
        show_menu()
        
        # Получаем выбор пользователя
        choice = input("Выберите операцию (1-7): ")
        
        # Обрабатываем выбор пользователя с помощью условных операторов
        if choice == '1':
            addition()
        elif choice == '2':
            subtraction()
        elif choice == '3':
            multiplication()
        elif choice == '4':
            division()
        elif choice == '5':
            exponentiation()
        elif choice == '6':
            square_root()
        elif choice == '7':
            # Выход из программы
            print("Спасибо за использование калькулятора! До свидания!")
            break
        else:
            # Обработка неверного выбора
            print("Неверный выбор! Пожалуйста, выберите операцию от 1 до 7.")
        
        # Пауза перед следующим действием
        input("\nНажмите Enter для продолжения...")

# Проверяем, запущен ли скрипт напрямую (а не импортирован как модуль)
if __name__ == "__main__":
    # Запускаем основную функцию программы
    main()